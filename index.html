<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Javaflame</title>
    <style>
        :root {
            --background-theme: #1a1a1a;
            --color-theme: #e6e6e6;
            --box-background-theme: #2e2e2e;
            --tooltip-background-theme: #4a525e;
            --tooltip-color-theme: #abb2bf;
            --tooltip-border-theme: #fff;
            --input-background-theme: #4a525e;
            --input-color-theme: #abb2bf;
            --input-placeholder-color-theme: #666;
            --notSelectedButton-background-theme: #c70039;
            --selectedButton-background-theme: #f94c10;
            --link-color-theme: #f94c10;
            --flamegraph-background-theme: #2e2e2e;
            --title-color-theme: #f94c10;
            --top-button-color-theme: #1a1a1a;
            --caret-color-theme: white;
        }

        * {
            margin: 0px;
            padding: 0px;
            border: inherit;
        }

        html, body {
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
            background-color: var(--background-theme);
            color: var(--color-theme);
        }

        img{
            display:block;
            margin:auto;
        }

        .grid {
            height: 100%;
            display: grid;
            background-color: var(--box-background-theme);
        }

        h1 {
            font-size: 5em;
            color: var(--title-color-theme);
        }

        h2 {
            font-size: 3em;
            margin-bottom: 0.5rem;;
        }

        p, ul {
            font-size: 2em;
        }

        .centered {
            justify-self: center;
            align-self: center;
        }

        .layout-title {
            grid-template-columns: 1fr;
            grid-template-rows: 0.6fr 1.5fr 0.9fr;
        }

        .header {
            padding: 5em;
            justify-self: center;
            align-self: center;
        }

        .layout-title-content {
            grid-template-columns: 1fr;
            grid-template-rows: 0.4fr 1.6fr;
        }

        .layout-title-content div.body {
            padding-left: 5em;
        }

        a {
            color: var(--link-color-theme);
        }

        .ul {
            padding: 1.5rem;
        }
    </style>
</head>
<body>
    
    <div class="slide grid layout-title">
        <div class="header">
            <h1>Javaflame</h1>
        </div>
        <div class="centered">
            <img class="centered" alt="logo" id="logo" width="300px" src="./logo.svg"/>
            <p>Better than System.out.println()</p>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>whoami</h1>
        </div>
        <div class="body">
            <ul>
                <li>Software Engineer @ Gebit</li>
                <li>Fullstack</li>
                <li>@Beothorn</li>
            </ul>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>First, the problem</h1>
        </div>
        <div class="body">
            <h2>How to figure out what is going on</h2>
            <div >

            </div>
            <ul>
                <li>Printing on console</li>
                <li>Add breakpoints</li>
                <li>Step by step look at the stack</li>
            </ul>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>Printing on the console</h1>
        </div>
        <div class="body">
            <ul>
                <li>Outputs get mixed up</li>
                <li>Confusing?</li>
            </ul>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>Breakpoints</h1>
        </div>
        <div class="body">
            <ul>
                <li>Slow - Only values for a single point in time</li>
                <li>Localized - Has only the current stack</li>
            </ul>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>To get the big picture Javaflame</h1>
        </div>
        <div class="body">
            <ul>
                <li>Does not require code changes</li>
                <li>Captures all argument values</li>
                <li>See them all together In a single place</li>
                <li>Does not care about performance</li>
            </ul>
        </div>
    </div>

    <div class="slide grid layout-title-content">
        <div class="header">
            <h1>To use it</h1>
        </div>
        <div class="body">
            <ul>
                <li>Download the agent</li>
                <li>Add to the jvm commandline:</li>
                <li>Example java -javaagent:javaAgent.jar -jar yourApp.jar</li>
            </ul>
        </div>
    </div>

<script>

const getUrlVars = () => {
    let vars = {}
    window.location.hash.replace(/[#&]+([^=&]+)=([^&]*)/gi, (m,key,value) => vars[key] = value)
    return vars 
}

const setUrlVar = (key, value) => {
    const oldHref = window.location.hash
    let merkerIndex = oldHref.indexOf('#')
    let pageUrl = oldHref.substring(0, merkerIndex)
    if(merkerIndex === -1) pageUrl = oldHref
    let vars = getUrlVars()
    if(vars[key] && vars[key] === value) return
    vars[key] = value
    let params = ""
    for (const [key, value] of Object.entries(vars)) {
        if(!params)
            params += `${key}=${value}`
        else
            params += `&${key}=${value}`
    }
    window.location.hash = params
}

let slides = Array.from(document.querySelectorAll(".slide"))
let currentSlide = 0
let lastSlide = slides.length - 1 
const showSlide = (slideIndex) => {
    slides.forEach(s => s.style.display = "none")
    slides[slideIndex].style.display = null
}
const setSlide = (slideIndex) => {
    currentSlide = parseInt(slideIndex)
    currentSlide = currentSlide < 0 ? 0 : currentSlide
    currentSlide = currentSlide > lastSlide ? lastSlide : currentSlide
    setUrlVar("slide", currentSlide)
    showSlide(currentSlide)
}
const nextSlide = () => setSlide(currentSlide + 1)
const previousSlide = () => setSlide(currentSlide - 1)

if(getUrlVars()["slide"])
    setSlide(getUrlVars()["slide"])
else
    setSlide("0")

document.onkeydown = (e) => {
    const left = 37
    const right = 39
    const backspace = 8
    const space = 32
    switch(e.keyCode){
        case left:
        case backspace:
            previousSlide()
            break
        case right:
        case space:
            nextSlide()
            break
    }
}

</script>
</body>
</html>